# =============================================================================
# CommunityOS Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your actual values
# Never commit .env to version control!

# =============================================================================
# Application Configuration
# =============================================================================
NODE_ENV=development
PORT=8000
API_SECRET=your_api_secret_here

# Application URLs
FRONTEND_URL=http://localhost:3000
BACKEND_URL=http://localhost:8000
APP_NAME=CommunityOS

# =============================================================================
# Database Configuration
# =============================================================================
DATABASE_URL=postgresql://communityos:your_password@localhost:5432/communityos
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_NAME=communityos
DATABASE_USER=communityos
DATABASE_PASSWORD=your_db_password

# Database Connection Pool
DATABASE_POOL_MIN=2
DATABASE_POOL_MAX=10
DATABASE_POOL_IDLE_TIMEOUT=10000

# =============================================================================
# Redis Configuration (Caching & Sessions)
# =============================================================================
REDIS_URL=redis://localhost:6379
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your_redis_password
REDIS_DB=0

# Redis TTL (Time To Live) in seconds
REDIS_SESSION_TTL=86400
REDIS_CACHE_TTL=3600

# =============================================================================
# Discord Bot Configuration
# =============================================================================
DISCORD_BOT_TOKEN=your_discord_bot_token
DISCORD_CLIENT_ID=your_discord_client_id
DISCORD_CLIENT_SECRET=your_discord_client_secret
DISCORD_REDIRECT_URI=http://localhost:8000/auth/discord/callback

# Discord Application Settings
DISCORD_BOT_PERMISSIONS=8
DISCORD_BOT_SCOPES=bot,applications.commands
DISCORD_GUILD_ID=your_test_guild_id

# =============================================================================
# Stripe Payment Configuration
# =============================================================================
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret

# Stripe Connect (for multi-tenant payments)
STRIPE_CONNECT_CLIENT_ID=ca_your_connect_client_id

# Stripe Product IDs
STRIPE_BASIC_PLAN_ID=price_your_basic_plan_id
STRIPE_PREMIUM_PLAN_ID=price_your_premium_plan_id
STRIPE_ENTERPRISE_PLAN_ID=price_your_enterprise_plan_id

# =============================================================================
# Authentication & Security
# =============================================================================
JWT_SECRET=your_jwt_secret_key_minimum_32_characters
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d

# Session Configuration
SESSION_SECRET=your_session_secret_key
SESSION_MAX_AGE=86400000

# Encryption Keys
ENCRYPTION_KEY=your_32_character_encryption_key
HASH_SALT_ROUNDS=12

# CORS Configuration
CORS_ORIGIN=http://localhost:3000
CORS_CREDENTIALS=true

# =============================================================================
# Next.js Frontend Configuration
# =============================================================================
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=your_nextauth_secret
NEXT_PUBLIC_API_URL=http://localhost:8000
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key
NEXT_PUBLIC_DISCORD_CLIENT_ID=your_discord_client_id

# =============================================================================
# Email Service Configuration
# =============================================================================
EMAIL_SERVICE=sendgrid
EMAIL_FROM=noreply@communityos.com
EMAIL_FROM_NAME=CommunityOS

# SendGrid
SENDGRID_API_KEY=your_sendgrid_api_key

# Resend (Alternative)
RESEND_API_KEY=your_resend_api_key

# SMTP (Alternative)
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=your_smtp_user
SMTP_PASSWORD=your_smtp_password
SMTP_SECURE=true

# =============================================================================
# File Storage Configuration
# =============================================================================
STORAGE_PROVIDER=local
# Options: local, aws-s3, gcp-storage, azure-blob

# Local Storage
UPLOAD_DIR=./uploads
MAX_FILE_SIZE=10485760

# AWS S3
AWS_ACCESS_KEY_ID=your_aws_access_key
AWS_SECRET_ACCESS_KEY=your_aws_secret_key
AWS_REGION=us-east-1
AWS_S3_BUCKET=your-s3-bucket

# Google Cloud Storage
GOOGLE_CLOUD_PROJECT=your-gcp-project
GOOGLE_CLOUD_KEYFILE=./service-account-key.json
GOOGLE_CLOUD_BUCKET=your-gcs-bucket

# =============================================================================
# Monitoring & Analytics
# =============================================================================
# Sentry (Error Tracking)
SENTRY_DSN=your_sentry_dsn
SENTRY_ENVIRONMENT=development

# Google Analytics
NEXT_PUBLIC_GA_TRACKING_ID=GA_TRACKING_ID

# PostHog (Product Analytics)
NEXT_PUBLIC_POSTHOG_KEY=your_posthog_key
NEXT_PUBLIC_POSTHOG_HOST=https://app.posthog.com

# =============================================================================
# Rate Limiting & Security
# =============================================================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=true

# IP Whitelist (comma-separated)
IP_WHITELIST=127.0.0.1,::1

# Webhook Security
WEBHOOK_SECRET=your_webhook_secret

# =============================================================================
# Background Jobs & Queues
# =============================================================================
# Bull/BullMQ Configuration
QUEUE_REDIS_URL=redis://localhost:6379
QUEUE_CONCURRENCY=5
QUEUE_MAX_STALLED_COUNT=3
QUEUE_MAX_RETRY_ATTEMPTS=3

# Job Types
ENABLE_EMAIL_QUEUE=true
ENABLE_DISCORD_QUEUE=true
ENABLE_BILLING_QUEUE=true
ENABLE_ANALYTICS_QUEUE=true

# =============================================================================
# Third-party Integrations
# =============================================================================
# OpenAI (for AI features)
OPENAI_API_KEY=your_openai_api_key

# Twilio (SMS notifications)
TWILIO_ACCOUNT_SID=your_twilio_account_sid
TWILIO_AUTH_TOKEN=your_twilio_auth_token
TWILIO_PHONE_NUMBER=your_twilio_phone

# Slack (notifications)
SLACK_WEBHOOK_URL=your_slack_webhook_url
SLACK_BOT_TOKEN=your_slack_bot_token

# =============================================================================
# Development & Testing
# =============================================================================
# Test Database
TEST_DATABASE_URL=postgresql://communityos:password@localhost:5432/communityos_test

# Debug Settings
DEBUG=true
LOG_LEVEL=debug

# Mock Services (for development)
MOCK_PAYMENTS=false
MOCK_EMAIL=true
MOCK_DISCORD=false

# =============================================================================
# Performance & Caching
# =============================================================================
# Cache TTL in seconds
CACHE_TTL_SHORT=300
CACHE_TTL_MEDIUM=3600
CACHE_TTL_LONG=86400

# Database Query Timeout
DB_QUERY_TIMEOUT=30000

# Request Timeout
REQUEST_TIMEOUT=30000

# =============================================================================
# Feature Flags
# =============================================================================
FEATURE_DISCORD_SLASH_COMMANDS=true
FEATURE_ADVANCED_ANALYTICS=true
FEATURE_AI_RECOMMENDATIONS=false
FEATURE_MULTI_LANGUAGE=false
FEATURE_WEBHOOKS_V2=true

# =============================================================================
# Business Configuration
# =============================================================================
# Subscription Tiers
DEFAULT_TRIAL_DAYS=14
MAX_COMMUNITIES_FREE=1
MAX_COMMUNITIES_BASIC=5
MAX_COMMUNITIES_PREMIUM=25
MAX_COMMUNITIES_ENTERPRISE=unlimited

# Revenue Share
PLATFORM_FEE_PERCENTAGE=5.0
MINIMUM_PAYOUT=50.00

# Support Configuration
SUPPORT_EMAIL=support@communityos.com
SALES_EMAIL=sales@communityos.com

# =============================================================================
# Deployment Configuration
# =============================================================================
# Health Check
HEALTH_CHECK_TIMEOUT=5000

# Graceful Shutdown
SHUTDOWN_TIMEOUT=10000

# Cluster Configuration
CLUSTER_WORKERS=auto

# =============================================================================
# Webhook URLs (for external services)
# =============================================================================
STRIPE_WEBHOOK_URL=http://localhost:8000/webhooks/stripe
DISCORD_WEBHOOK_URL=http://localhost:8000/webhooks/discord

# =============================================================================
# API Keys & Secrets Checklist
# =============================================================================
# □ Discord Bot Token
# □ Discord Client ID & Secret
# □ Stripe Secret & Publishable Keys
# □ Stripe Webhook Secret
# □ Database Password
# □ JWT Secret (32+ characters)
# □ Encryption Key (32 characters)
# □ Session Secret
# □ NextAuth Secret
# □ Email Service API Key
# □ File Storage Credentials